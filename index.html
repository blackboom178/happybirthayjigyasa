<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Birthday Jigyasa! üéâ</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap');
    
    body {
      font-family: 'Baloo 2', cursive;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb, #a6c1ee);
      background-size: 400% 400%;
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      animation: gradientBG 15s ease infinite;
      overflow: hidden;
    }
    
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .container {
      max-width: 800px;
      padding: 20px;
      position: relative;
      z-index: 10;
    }
    
    h1 {
      color: white;
      font-size: 3rem;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.2);
      margin-bottom: 30px;
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .page {
      display: none;
      background: rgba(255,255,255,0.85);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      backdrop-filter: blur(5px);
      transform-style: preserve-3d;
      transition: all 0.5s ease;
    }
    
    .page.active {
      display: block;
      animation: fadeIn 0.8s, float 4s ease-in-out infinite;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0.5deg); }
      50% { transform: translateY(-10px) rotate(-0.5deg); }
    }
    
    #cake-container {
      width: 300px;
      height: 300px;
      margin: 0 auto;
      position: relative;
    }
    
    .btn {
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 50px;
      font-size: 1.1rem;
      cursor: pointer;
      margin: 15px;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(255,107,107,0.4);
      font-weight: bold;
    }
    
    .btn:hover {
      background: #ff5252;
      transform: scale(1.1) rotate(5deg);
      box-shadow: 0 8px 20px rgba(255,107,107,0.6);
    }
    
    .wish-form {
      margin-top: 20px;
    }
    
    textarea {
      width: 100%;
      padding: 15px;
      border-radius: 15px;
      border: 2px solid #ff6b6b;
      margin-bottom: 20px;
      font-family: inherit;
      font-size: 1rem;
      transition: all 0.3s;
    }
    
    textarea:focus {
      outline: none;
      border-color: #f368e0;
      box-shadow: 0 0 10px rgba(243,104,224,0.5);
    }
    
    .balloon {
      position: absolute;
      width: 40px;
      height: 50px;
      border-radius: 50%;
      animation: floatUp 15s linear infinite;
      z-index: 1;
    }
    
    @keyframes floatUp {
      0% { transform: translateY(100vh) scale(0.5); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100px) scale(1.2); opacity: 0; }
    }
    
    .hearts {
      position: absolute;
      font-size: 20px;
      color: #ff6b6b;
      animation: floatHeart 8s linear infinite;
      z-index: 1;
    }
    
    @keyframes floatHeart {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }
    
    #confetti-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 5;
    }
    
    .qualities-list {
      text-align: left;
      font-size: 1.2rem;
      color: #5f27cd;
    }
    
    .qualities-list li {
      margin: 15px 0;
      padding: 10px;
      background: rgba(255,255,255,0.7);
      border-radius: 10px;
      list-style-type: "üéÄ ";
      animation: slideIn 0.5s forwards;
      opacity: 0;
      transform: translateX(-20px);
    }
    
    @keyframes slideIn {
      to { opacity: 1; transform: translateX(0); }
    }
    
    /* Intro Animation */
    #intro {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      background: rgba(0,0,0,0.7);
      z-index: 100;
    }
    
    .intro-text {
      color: white;
      font-size: 4rem;
      text-align: center;
      opacity: 0;
      transform: translateY(20px);
    }
    
    .intro-word {
      display: inline-block;
      margin: 0 10px;
    }
    
    .heart-explosion {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    
    .heart-particle {
      position: absolute;
      font-size: 24px;
      opacity: 0;
      animation: heartPop 1s forwards;
    }
    
    @keyframes heartPop {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.5); opacity: 1; }
      100% { transform: scale(1); opacity: 0; }
    }
    
    /* Second Intro Page */
    #second-intro {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      background: rgba(0,0,0,0.7);
      z-index: 99;
    }
    
    .second-intro-text {
      color: white;
      font-size: 4rem;
      text-align: center;
    }
    
    .second-intro-word {
      display: inline-block;
      margin: 0 10px;
      opacity: 0;
      transform: translateY(20px);
    }
    
    .age-reveal {
      font-size: 3rem;
      color: #ff6b6b;
      margin-top: 30px;
      opacity: 0;
      transform: scale(0);
    }
    
    .blast-circle {
      position: absolute;
      border-radius: 50%;
      background: rgba(255,255,255,0.8);
      transform: scale(0);
      pointer-events: none;
    }
  </style>
</head>
<body>
  <canvas id="confetti-canvas"></canvas>
  
  <!-- First Intro Screen -->
  <div id="intro">
    <div class="intro-text" id="intro-text">
      <span class="intro-word">Happy</span>
      <span class="intro-word">Birthday</span>
      <span class="intro-word">Jigyasa!</span>
    </div>
    <div class="heart-explosion" id="heart-explosion"></div>
  </div>
  
  <!-- Second Intro Screen -->
  <div id="second-intro">
    <div class="second-intro-text" id="second-intro-text">
      <span class="second-intro-word">Happy</span>
      <span class="second-intro-word">Birthday</span>
      <span class="second-intro-word">Jigyasa!</span>
    </div>
    <div id="age-reveal" class="age-reveal"></div>
  </div>
  
  <!-- Floating balloons -->
  <div class="balloon" style="left:10%; background:#ff7675; animation-delay:0s;"></div>
  <div class="balloon" style="left:25%; background:#74b9ff; animation-delay:2s;"></div>
  <div class="balloon" style="left:40%; background:#ffeaa7; animation-delay:4s;"></div>
  <div class="balloon" style="left:55%; background:#a29bfe; animation-delay:1s;"></div>
  <div class="balloon" style="left:70%; background:#fd79a8; animation-delay:3s;"></div>
  <div class="balloon" style="left:85%; background:#55efc4; animation-delay:5s;"></div>
  
  <!-- Floating hearts -->
  <div class="hearts" style="left:15%; animation-delay:0.5s;">‚ù§Ô∏è</div>
  <div class="hearts" style="left:30%; animation-delay:1.5s;">üíñ</div>
  <div class="hearts" style="left:45%; animation-delay:2.5s;">üíï</div>
  <div class="hearts" style="left:60%; animation-delay:3.5s;">üíó</div>
  <div class="hearts" style="left:75%; animation-delay:4.5s;">üíò</div>
  
  <div class="container">
    <!-- Home Page -->
    <div class="page" id="home">
      <h1>üéÇ Happy Birthday Jigyasa! üéâ</h1>
      <p style="font-size:1.2rem; color:#5f27cd;">Click next to begin your magical day!</p>
      <button class="btn" onclick="nextPage()">Let's Go! üöÄ</button>
    </div>
    
    <!-- Qualities Page -->
    <div class="page" id="qualities">
      <h1>‚ú® What Makes You Special ‚ú®</h1>
      <ul class="qualities-list">
        <li style="animation-delay:0.2s">Brilliant mind that sparkles like stars</li>
        <li style="animation-delay:0.4s">Heart full of kindness and warmth</li>
        <li style="animation-delay:0.6s">Incredible sense of humor that lights up rooms</li>
        <li style="animation-delay:0.8s">Strength that inspires everyone around you</li>
        <li style="animation-delay:1.0s">Unique beauty inside and out</li>
      </ul>
      <button class="btn" onclick="nextPage()">Continue the Magic ‚ú®</button>
    </div>
    
    <!-- Countdown Page -->
    <div class="page" id="countdown">
      <h1>üåü Your Beautiful Journey üåü</h1>
      <p style="font-size:1.3rem; color:#5f27cd;">From 2008 to today!</p>
      <div id="year-counter" style="font-size:3rem; font-weight:bold; color:#ff6b6b; margin:20px 0;">2008</div>
      <div id="age-display" style="font-size:1.5rem; color:#5f27cd;"></div>
      <button class="btn" onclick="nextPage()">Blow the Candles! üéÇ</button>
    </div>
    
    <!-- Cake Page -->
    <div class="page" id="cake">
      <h1>üïØÔ∏è Make a Wish! üïØÔ∏è</h1>
      <div id="cake-container"></div>
      <p style="font-size:1.2rem; color:#5f27cd;">Click each candle to blow it out</p>
      <div id="wish-message" style="display:none; font-size:1.3rem; color:#ff6b6b; margin-top:15px;"></div>
    </div>
    
    <!-- Wish Page -->
    <div class="page" id="wish">
      <h1>üå† Your Birthday Wish üå†</h1>
      <div class="wish-form">
        <form id="birthdayWish" action="https://formsubmit.co/foruse78@gmail.com" method="POST">
          <input type="hidden" name="_subject" value="Jigyasa's Birthday Wish!">
          <textarea name="wish" placeholder="What wonderful things would you like this year?" rows="5" required></textarea>
          <button type="submit" class="btn" id="submitWishBtn">Send My Wish to the Universe üåà</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    const pages = ["home", "qualities", "countdown", "cake", "wish"];
    let currentPage = 0;
    let candlesBlown = 0;
    let cakeScene, cakeCamera, cakeRenderer, cake, candles = [];
    let raycaster = new THREE.Raycaster();
    let mouse = new THREE.Vector2();
    
    // Confetti setup
    const confettiSettings = { 
      target: 'confetti-canvas',
      max: 150,
      size: 1.5,
      animate: true,
      props: ['circle', 'square', 'triangle', 'line'],
      colors: [[255,107,107], [255,159,67], [255,206,70], [46,204,113], [52,152,219], [155,89,182]],
      clock: 25
    };
    const confetti = new ConfettiGenerator(confettiSettings);
    
    // Show intro animation first
    showIntro();
    
    function showIntro() {
      const words = document.querySelectorAll('.intro-word');
      const heartExplosion = document.getElementById('heart-explosion');
      
      // Animate words one by one
      words.forEach((word, index) => {
        setTimeout(() => {
          word.style.opacity = 1;
          word.style.transform = 'translateY(0)';
          
          // On last word, show heart explosion
          if (index === words.length - 1) {
            setTimeout(() => {
              createHeartExplosion();
              setTimeout(() => {
                document.getElementById('intro').style.opacity = 0;
                setTimeout(() => {
                  document.getElementById('intro').style.display = 'none';
                  showSecondIntro();
                }, 1000);
              }, 1500);
            }, 500);
          }
        }, 1000 * index);
      });
    }
    
    function showSecondIntro() {
      document.getElementById('second-intro').style.display = 'flex';
      const words = document.querySelectorAll('.second-intro-word');
      
      // Animate words one by one
      words.forEach((word, index) => {
        setTimeout(() => {
          word.style.opacity = 1;
          word.style.transform = 'translateY(0)';
          
          // On last word, show blast and transition
          if (index === words.length - 1) {
            setTimeout(() => {
              createBlastEffect();
              setTimeout(() => {
                document.getElementById('second-intro').style.opacity = 0;
                setTimeout(() => {
                  document.getElementById('second-intro').style.display = 'none';
                  showPage('home');
                }, 1000);
              }, 1500);
            }, 500);
          }
        }, 1000 * index);
      });
    }
    
    function createHeartExplosion() {
      const heartExplosion = document.getElementById('heart-explosion');
      const hearts = ['‚ù§Ô∏è', 'üíñ', 'üíï', 'üíó', 'üíò', 'üíì', 'üíù'];
      
      for (let i = 0; i < 50; i++) {
        const heart = document.createElement('div');
        heart.className = 'heart-particle';
        heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
        heart.style.left = Math.random() * 100 + '%';
        heart.style.top = Math.random() * 100 + '%';
        heart.style.animationDelay = Math.random() * 0.5 + 's';
        heart.style.fontSize = (20 + Math.random() * 30) + 'px';
        heartExplosion.appendChild(heart);
        
        // Remove heart after animation
        setTimeout(() => {
          heart.remove();
        }, 1000);
      }
    }
    
    function createBlastEffect() {
      const container = document.getElementById('second-intro');
      const blast = document.createElement('div');
      blast.className = 'blast-circle';
      blast.style.width = '0px';
      blast.style.height = '0px';
      blast.style.left = '50%';
      blast.style.top = '50%';
      blast.style.transform = 'translate(-50%, -50%) scale(0)';
      blast.style.background = 'radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,107,107,0) 70%)';
      container.appendChild(blast);
      
      // Animate blast
      setTimeout(() => {
        blast.style.width = '2000px';
        blast.style.height = '2000px';
        blast.style.transform = 'translate(-50%, -50%) scale(1)';
        blast.style.opacity = '0';
        blast.style.transition = 'all 1s ease-out';
      }, 10);
      
      // Show age reveal
      const ageReveal = document.getElementById('age-reveal');
      ageReveal.textContent = 'You are now 17! üéâ';
      setTimeout(() => {
        ageReveal.style.opacity = '1';
        ageReveal.style.transform = 'scale(1)';
        ageReveal.style.transition = 'all 0.5s ease-out';
      }, 500);
      
      // Remove blast after animation
      setTimeout(() => {
        blast.remove();
      }, 1000);
    }
    
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
      
      // Special page setups
      if (pageId === 'cake' && !cakeScene) {
        init3DCake();
      }
    }
    
    function nextPage() {
      if (currentPage < pages.length - 1) {
        currentPage++;
        showPage(pages[currentPage]);
        
        if (pages[currentPage] === 'countdown') {
          startCountdown();
        }
      }
    }
    
    function startCountdown() {
      let year = 2008;
      const counter = document.getElementById('year-counter');
      const ageDisplay = document.getElementById('age-display');
      const endYear = new Date().getFullYear();
      
      const timer = setInterval(() => {
        year++;
        counter.textContent = year;
        ageDisplay.textContent = `Age ${year - 2008}`;
        
        if (year === endYear) {
          clearInterval(timer);
          // Create blast effect at end of countdown
          createCountdownBlast();
          ageDisplay.innerHTML += "<br>You are now 17! üéâ";
        }
      }, 200);
    }
    
    function createCountdownBlast() {
      const container = document.getElementById('countdown');
      const blast = document.createElement('div');
      blast.className = 'blast-circle';
      blast.style.width = '0px';
      blast.style.height = '0px';
      blast.style.left = '50%';
      blast.style.top = '50%';
      blast.style.transform = 'translate(-50%, -50%) scale(0)';
      blast.style.background = 'radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,107,107,0) 70%)';
      container.appendChild(blast);
      
      // Animate blast
      setTimeout(() => {
        blast.style.width = '1000px';
        blast.style.height = '1000px';
        blast.style.transform = 'translate(-50%, -50%) scale(1)';
        blast.style.opacity = '0';
        blast.style.transition = 'all 1s ease-out';
      }, 10);
      
      // Remove blast after animation
      setTimeout(() => {
        blast.remove();
      }, 1000);
    }
    
    function init3DCake() {
      // Set up Three.js scene
      cakeScene = new THREE.Scene();
      cakeCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
      cakeRenderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
      cakeRenderer.setSize(300, 300);
      document.getElementById('cake-container').appendChild(cakeRenderer.domElement);
      
      // Add lights
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
      cakeScene.add(ambientLight);
      
      const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
      directionalLight.position.set(1, 1, 1);
      cakeScene.add(directionalLight);
      
      // Create cake
      const cakeGeometry = new THREE.CylinderGeometry(2, 2, 1, 32);
      const cakeMaterial = new THREE.MeshPhongMaterial({ 
        color: 0xf9a8d4,
        shininess: 100
      });
      cake = new THREE.Mesh(cakeGeometry, cakeMaterial);
      cake.position.y = -1;
      cakeScene.add(cake);
      
      // Create icing
      const icingGeometry = new THREE.TorusGeometry(2, 0.2, 16, 100, Math.PI * 2);
      const icingMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff });
      const icing = new THREE.Mesh(icingGeometry, icingMaterial);
      icing.position.y = -0.4;
      cakeScene.add(icing);
      
      // Create candles
      const candleGeometry = new THREE.CylinderGeometry(0.1, 0.1, 0.8, 16);
      const candleMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff });
      const flameGeometry = new THREE.ConeGeometry(0.15, 0.4, 16);
      const flameMaterial = new THREE.MeshBasicMaterial({ 
        color: 0xff9900,
        transparent: true,
        opacity: 0.8
      });
      
      for (let i = 0; i < 4; i++) {
        const candle = new THREE.Mesh(candleGeometry, candleMaterial.clone());
        candle.position.x = (i - 1.5) * 0.6;
        candle.position.y = 0;
        candle.position.z = 0;
        
        const flame = new THREE.Mesh(flameGeometry, flameMaterial.clone());
        flame.position.y = 0.9;
        flame.position.x = candle.position.x;
        flame.position.z = candle.position.z;
        flame.userData.isLit = true;
        
        candle.add(flame);
        cakeScene.add(candle);
        candles.push({ candle, flame });
        
        // Make candle interactive
        candle.userData = { index: i, isLit: true };
      }
      
      // Position camera
      cakeCamera.position.z = 5;
      
      // Animation loop
      animateCake();
      
      // Add click handler
      document.getElementById('cake-container').addEventListener('click', onCakeClick, false);
    }
    
    function animateCake() {
      requestAnimationFrame(animateCake);
      
      // Rotate cake slightly
      cake.rotation.y += 0.005;
      
      // Animate flames
      candles.forEach(candleObj => {
        if (candleObj.flame.userData.isLit) {
          candleObj.flame.scale.y = 1 + Math.sin(Date.now() * 0.01) * 0.2;
          candleObj.flame.scale.x = 1 + Math.cos(Date.now() * 0.008) * 0.1;
        }
      });
      
      cakeRenderer.render(cakeScene, cakeCamera);
    }
    
    function onCakeClick(event) {
      // Calculate mouse position in normalized device coordinates
      const rect = cakeRenderer.domElement.getBoundingClientRect();
      mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
      mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
      
      // Update the raycaster
      raycaster.setFromCamera(mouse, cakeCamera);
      
      // Check for intersections with candles
      const intersects = raycaster.intersectObjects(cakeScene.children, true);
      
      if (intersects.length > 0) {
        // Find the top-level candle object
        let obj = intersects[0].object;
        while (obj.parent && obj.parent !== cakeScene) {
          obj = obj.parent;
        }
        
        if (obj.userData && obj.userData.isLit) {
          blowCandle(obj);
        }
      }
    }
    
    function blowCandle(candle) {
      if (!candle.userData.isLit) return;
      
      candle.userData.isLit = false;
      candlesBlown++;
      
      // Play blow sound
      const blowSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3');
      blowSound.volume = 0.3;
      blowSound.play();
      
      // Hide flame
      const candleObj = candles[candle.userData.index];
      candleObj.flame.visible = false;
      
      // Change candle color to show it's blown
      candle.material.color.setHex(0xdddddd);
      
      if (candlesBlown === 4) {
        document.getElementById('wish-message').style.display = 'block';
        document.getElementById('wish-message').textContent = 'All candles blown! Your wish will come true! ‚ú®';
        confetti.render();
        
        setTimeout(() => {
          nextPage();
        }, 2000);
      }
    }
    
    // Form submission handler - SIMPLIFIED
    document.getElementById('birthdayWish').addEventListener('submit', function() {
      const submitBtn = document.getElementById('submitWishBtn');
      submitBtn.innerHTML = 'Sending... ‚ú®';
      submitBtn.disabled = true;
      
      // Let the form submit normally to FormSubmit
      return true;
    });
    
    // Create random floating hearts
    setInterval(() => {
      const heart = document.createElement('div');
      heart.className = 'hearts';
      heart.innerHTML = ['‚ù§Ô∏è', 'üíñ', 'üíï', 'üíó', 'üíò'][Math.floor(Math.random() * 5)];
      heart.style.left = Math.random() * 100 + '%';
      heart.style.animationDuration = (5 + Math.random() * 10) + 's';
      heart.style.animationDelay = Math.random() * 5 + 's';
      document.body.appendChild(heart);
      
      // Remove heart after animation
      setTimeout(() => {
        heart.remove();
      }, 15000);
    }, 800);
  </script>
</body>
</html>
